<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1" />
    <title>TODO</title>
</head>

<body>
    <script src="../dist/hyper-ui.umd.js"></script>
    <script type="text/javascript">
        HUI.define('Editor', {
            render: function (props, store, context) {
                return HUI('form', {
                    onsubmit: function (e) {
                        e.preventDefault();
                        var input = store.get('input'),
                            content = input.value;
                        if (content) {
                            context.set(
                                'items',
                                context.get('items').concat(content)
                            );
                            input.value = '';
                        } else {
                            store.get('input').focus();
                        }
                    }
                }, [
                    HUI('input', {
                        ref: store.setter('input'),
                        placeholder: 'content'
                    }),
                    HUI('input', {
                        attributes: {
                            type: 'submit',
                            value: 'Add'
                        }
                    })
                ]);
            }
        });

        HUI.define('List', {
            context: ['items'],
            render: function (props, store, context) {
                return HUI('ul', null, context.get('items').map(function (item, i) {
                    return HUI('li', null, [
                        HUI('span', {
                            style: 'margin-right: 1em;'
                        }, item),
                        HUI('a', {
                            href: 'javascript:;',
                            onclick: function () {
                                var items = context.get('items');
                                items.splice(i, 1);
                                context.set('items', items, true);
                            }
                        }, 'Del')
                    ]);
                }));
            }
        });

        HUI.render(
            HUI(HUI.Context, {
                key: 'items',
                value: []
            }, [
                HUI('h1', null, 'TODO'),
                HUI('Editor'),
                HUI('List')
            ])
        );
    </script>
</body>

</html>